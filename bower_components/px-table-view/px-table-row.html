<script src="../hammerjs/hammer.min.js"></script>
<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html">
<link rel="import" href="../px-partials/px-icon/px-icon.html"/>

<link rel="import" href="px-table-row-styles.html">
<link rel="import" href="px-table-row-behavior.html"/>
<link rel="import" href="px-table-row-checkbox.html"/>
<link rel="import" href="px-table-row-actions.html"/>
<link rel="import" href="px-table-row-action-button.html"/>
<link rel="import" href="px-table-row-swipe-behavior.html"/>
<link rel="import" href="px-table-row-switch.html"/>

<!--
<p>
  For a list of all demos visit  <a href="./demo" target="_blank">here</a>.
</p>

To use this element you can do the following:
```
<px-table-row title="Item Label"></px-table-row>
```

To style this component you can do the following:

```
<style is="custom-style">
   :root .my-theme{
     --px-table-row:{
       color: #b0fffe;
       background-color: #36bd64;
       border-bottom: 1px solid #1d8756;
     }
     --px-table-row-underlay:{
       width: 100%;
     }
   }
 </style>
```

### Styling

Custom property | Description | Default
------------ | ------------- | ------------
  `--px-table-row` | Style mixin to be applied to the component | {}
  `--px-table-row__title` | Style mixin to be applied to the title element | {}
  `--px-table-row__body` | Style mixin to be applied to the body element | {}
  `--px-table-row__label` | Style mixin to be applied to the label element | {}
  `--px-table-row__media` | Style mixin to be applied to the media element | {}
  `--px-table-row-font-size`       | The font size of the table row  | 16px
  `--px-table-row-color`       | The font color of the table row  | $black
  `--px-table-row-background-color`       | The background color of the table row  | $white
  `--px-table-row-selected-color`       | The font color of the selected table row  | $white
  `--px-table-row-selected-background-color`       | The background color of the selected table row  | #0a9ec1
  `--px-table-row-border-color`       | The border color  | $gray5
  `--px-table-row-border-width`       | The border width  | 1px
  `--px-table-row-border-style`       | The border style  | solid
  `--px-table-row-title-font-size`       | The font size of the table row title. | 17px
  `--px-table-row-title-color`       | The font color of the table row title. | $black
  `--px-table-row-body-font-size`       | The font size of the table row body. | 16px
  `--px-table-row-body-color`       | The font color of the table row body. | $black
  `--px-table-row-subtitle-font-size`       | The font size of the table row subtitle. | 15px
  `--px-table-row-subtitle-color`       | The font color of the table row subtitle. | $gray5
  `--px-table-row-label-font-size`       | The font size of the table row label. | 16px
  `--px-table-row-label-color`       | The font color of the table row label. | $black
  `--px-table-row-line-height`       | The line height of the table row  | 44px
  `--px-table-row-min-height`       | The min height of the table row  | 44px
  `--px-table-row-header-line-height` | The line height for the table-row header | 44px


@element px-table-row.html
@demo demo/index.html
@homepage index.html
-->
<dom-module id="px-table-row">
  <!-- <link rel="import" type="css" href="css/px-table-row.css"> -->
  <style include="px-table-row-css"></style>
  <style media="screen">
    :host {
      display: block;
      position: relative;
      overflow: hidden;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      box-sizing: border-box;
    }
    :host .table-row{
      @apply(--px-table-row);
    }

    :host .table-row__title{
      @apply(--px-table-row-title);
    }

    :host .table-row__body{
      @apply(--px-table-row-body);
    }
    :host .table-row__media{
      @apply(--px-table-row-media);
    }
    :host .table-row__media img{
      @apply(--px-table-row-media-img);
    }
    :host .table-row__label{
      @apply(--px-table-row-label);
    }

    :host .table-row__label--right{
      @apply(--px-table-row-label--right);
    }

    :host .table-row__label--left{
      @apply(--px-table-row-label--left);
    }

    :host #underlay{
      position: absolute;
      top: 0px;
      bottom: 0px;
      overflow: hidden;
      @apply(--px-table-row-underlay);
    }

    :host #underlay ::content > [underlay] {
      @apply(--px-table-row-underlay-content);
    }

    :host .table-row__handle{
      border: none;
      background: transparent;
      color: #b1b1bc;
      cursor: move;
    }

  </style>
  <template strip-whitespace>
    <div class="">
      <div id="row" class="table-row" data-indicator$="{{indicator}}" >
        <template is="dom-if" if="{{label2}}">
          <span class="table-row__label table-row__label--left">{{label2}}</span>
        </template>
        <template is="dom-if" if="{{image}}">
          <div class="table-row__media table-row__media--image">
            <img src$="{{image}}" alt="{{title}}">
          </div>
        </template>
        <template is="dom-if" if="{{icon}}">
          <div class="table-row__media table-row__media--icon">
            <px-icon id="icon" icon$="{{icon}}" size$="{{iconSize}}"></px-icon>
          </div>
        </template>
        <template is="dom-if" if="{{iconLeft}}">
          <div class="table-row__media table-row__media--icon table-row__media--left">
            <px-icon id="iconLeft" icon$="{{iconLeft}}" size$="{{iconSize}}"></px-icon>
          </div>
        </template>
        <template is="dom-if" if="{{iconRight}}">
          <div class="table-row__media table-row__media--icon table-row__media--right">
            <px-icon id="iconRight" icon$="{{iconRight}}" size$="{{iconSize}}"></px-icon>
          </div>
        </template>
        <template is="dom-if" if="{{editMode}}">
          <div class="table-row__media table-row__media--icon table-row__media--right">
            <button class="btn btn--bare table-row__handle">
              <px-icon id="iconHandle" icon="fa:fa-bars"></px-icon>
            </button>
          </div>
        </template>
        <template is="dom-if" if="{{label1}}">
          <span class="table-row__label table-row__label--right">{{label1}}</span>
        </template>

        <div class="table-row__content">
          <template is="dom-if" if="{{title}}">
            <div class="table-row__title">{{title}}</div>
          </template>
          <template is="dom-if" if="{{subtitle}}">
            <div class="table-row__subtitle">{{subtitle}}</div>
          </template>
          <template is="dom-if" if="{{body}}">
            <div class="table-row__body">{{body}}</div>
          </template>
          <content select="px-table-row-switch, px-table-row-checkbox"></content>
        </div>
      </div>
      <div class="table-row__content">
        <content select="[content], input, button"></content>
      </div>
      <div id="underlay" class="flex flex--stretch">
        <content id="underlayContent" select="[underlay]"></content>
      </div>
    </div>
  </template>
  <script>
    Polymer({
      is: 'px-table-row',
      behaviors: [
        Polymer.IronResizableBehavior,
        pxTableRowBehavior,
        pxTableRowSwipeBehavior
      ],
      properties: {
        /**
        * The table-row object.
        */
        item: {
          type: Object,
          value: {}
        },
        /**
        * The title to set on the table-row.
        */
        title: {
          type: String,
          value: null
        },
        /**
        * The sub title to set on the table-row.
        */
        subtitle: {
          type: String
        },
        /**
        * The label to place on the right side of the item.
        */
        label1: {
          type: String
        },
        /**
        * The label to place on the left side of the item.
        */
        label2: {
          type: String
        },
        /**
        * The body to set on the table-row.
        */
        body: {
          type: String
        },
        /**
        * The image to set on the table-row.
        */
        image: {
          type: String
        },
        /**
        * The icon to set on the table-row.
        * Using font-awesome-polymer-icons svg set.
        * Example: `fa:line-chart`
        */
        icon: {
          type: String
        },
        /**
        * The left icon to set on the table-row.
        * Using font-awesome-polymer-icons svg set.
        * Example: `fa:line-chart`
        */
        iconLeft: {
          type: String
        },
        /**
        * The right icon to set on the table-row.
        * Using font-awesome-polymer-icons svg set.
        * Example: `fa:line-chart`
        */
        iconRight: {
          type: String
        },
        /**
        * The size to set on the table-row.
        */
        size: {
          type: String
        },
        /**
        * The size to set on the icon.
        */
        iconSize: {
          type: Number
        },
        /**
        * The indicator to set on the table-row.
        */
        indicator: {
          type: String
        },
        /**
        * The media position (left or right);
        */
        mediaPos: {
          type: String
        },
        /**
         * The modifiers to apply to the table-row (tappable, info, nav-right, chevron)
         */
        modifier: {
          type: String,
          notify: true,
          reflectToAttribute: true,
          observer: '_handleModifier'
        },
        /**
        * If swipeable is true then this item responds to swipeleft/swiperight events.
        */
        swipeable: {
          type: Boolean
        },
        /**
         * If the table row should be collapsable.
         */
        collapsable: {
          type: Boolean
        },
        /**
         * If the table row should be editable.
         */
        editMode: {
          type: Boolean
        },
        /**
         * The state of the table row if collapsable.
         */
        opened: {
          type: Boolean,
          value: false,
          notify: true,
          reflectToAttribute: true,
          observer: '_handleOpened'
        }
      },
      ready: function(){
        this.listen(this.$.row, 'tap', '_handleTap');
      },
      detached: function(){
        this.unlisten(this.$.row, 'tap', '_handleTap');
      },
      _hideBody: function(){
        this.opened = !this.opened;
      },
      _handleOpened: function (newVal, oldVal) {
        this.toggleClass('table-row--collapsable--is-opened', oldVal, this.$$('.table-row'));
        this.toggleClass('table-row--collapsable--is-opened', newVal, this.$$('.table-row'));
      },
      /**
       * Fires event when row is tapped.
       * @event px-table-row-tap
       */
      _handleTap: function (e) {
        var target = Polymer.dom(e).rootTarget;
        if(this.collapsable){
          this._hideBody();
        }
        this.fire('px-table-row-tap', e);
      }
    });
  </script>
</dom-module>
